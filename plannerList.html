<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Planner List</title>
</head>
<body>

    <h1>Planner List</h1>

    <ul id="plannerList"></ul>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const plannerListContainer = document.getElementById('plannerList');

            // Fetch를 사용하여 Planner 목록 가져오기
            fetch('http://localhost:8000/schedule/plannerList/')
                .then(response => response.json())
                .then(data => {
                    // Planner 목록 생성
                    const plannerList = document.createElement('ul');
                    data.forEach(planner => {
                        const plannerItem = document.createElement('li');
                        const plannerLink = document.createElement('a');
                        plannerLink.href = 'planner_detail.html';
                        plannerLink.addEventListener('click', function () {
                            // 클릭 시 plannerId를 localStorage에 저장
                            localStorage.setItem('plannerId', planner.id);
                        });
                        plannerLink.textContent = planner.title;
                        plannerItem.appendChild(plannerLink);
                        plannerList.appendChild(plannerItem);
                    });
                    plannerListContainer.appendChild(plannerList);
                })
                .catch(error => console.error('Error fetching planner list:', error));
        });
    </script>

</body>
</html>
