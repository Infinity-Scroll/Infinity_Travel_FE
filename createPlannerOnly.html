<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create Planner</title>
    <!-- CSS 스타일링은 필요에 따라 추가하세요 -->
    <style>
        /* 여기에 스타일링 코드 추가 */
    </style>
</head>
<body>
    <h1>Create Planner</h1>
    <form id="planner-form">
        <!-- Planner 정보 입력 -->
        <label for="planner-name">Planner Name:</label>
        <input type="text" id="planner-name" name="planner-name" required>

        <!-- 시작 날짜 입력 -->
        <label for="start-date">Start Date:</label>
        <input type="date" id="start-date" name="start-date" required>

        <!-- 끝 날짜 입력 -->
        <label for="end-date">End Date:</label>
        <input type="date" id="end-date" name="end-date" required>

        <!-- Planner를 생성하기 위한 버튼 -->
        <button type="button" onclick="submitPlanner()">Create Planner</button>
    </form>

    <!-- JavaScript 코드 추가 -->
    <script>
        // Planner를 생성하기 위한 함수
        async function submitPlanner() {
            try {
                // 입력한 정보를 가져오기
                const plannerName = document.getElementById('planner-name').value;
                const startDate = document.getElementById('start-date').value;
                const endDate = document.getElementById('end-date').value;

                // 데이터를 DRF API에 전송
                const response = await fetch('http://localhost:8000/schedule/api/planner/list-create/', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        title: plannerName,
                        start_date: startDate,
                        end_date: endDate,
                    }),
                });

                if (response.ok) {
                    console.log('Planner created successfully!');
                    // 원하는 처리를 추가하세요 (예: 페이지 이동)
                } else {
                    console.error('Failed to create planner.');
                }
            } catch (error) {
                console.error('Error submitting planner:', error);
            }
        }
    </script>
</body>
</html>
